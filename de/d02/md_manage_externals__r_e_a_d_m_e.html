<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CAM6: README</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CAM6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">README </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>&ndash; AUTOMATICALLY GENERATED FILE. DO NOT EDIT &ndash;</p>
<p><a href="https://travis-ci.org/ESMCI/manage_externals"><img src="https://travis-ci.org/ESMCI/manage_externals.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a><a href="https://coveralls.io/github/ESMCI/manage_externals?branch=master"><img src="https://coveralls.io/repos/github/ESMCI/manage_externals/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> </p><div class="fragment"><div class="line">usage: checkout_externals [-h] [-e [EXTERNALS]] [-o] [-S] [-v] [--backtrace]</div>
<div class="line">                          [-d] [--no-logging]</div>
<div class="line"> </div>
<div class="line">checkout_externals manages checking out groups of externals from revision</div>
<div class="line">control based on a externals description file. By default only the</div>
<div class="line">required externals are checkout out.</div>
<div class="line"> </div>
<div class="line">Operations performed by manage_externals utilities are explicit and</div>
<div class="line">data driven. checkout_externals will always make the working copy *exactly*</div>
<div class="line">match what is in the externals file when modifying the working copy of</div>
<div class="line">a repository.</div>
<div class="line"> </div>
<div class="line">If checkout_externals isn&#39;t doing what you expected, double check the contents</div>
<div class="line">of the externals description file.</div>
<div class="line"> </div>
<div class="line">Running checkout_externals without the &#39;--status&#39; option will always attempt to</div>
<div class="line">synchronize the working copy to exactly match the externals description.</div>
<div class="line"> </div>
<div class="line">optional arguments:</div>
<div class="line">  -h, --help            show this help message and exit</div>
<div class="line">  -e [EXTERNALS], --externals [EXTERNALS]</div>
<div class="line">                        The externals description filename. Default:</div>
<div class="line">                        Externals.cfg.</div>
<div class="line">  -o, --optional        By default only the required externals are checked</div>
<div class="line">                        out. This flag will also checkout the optional</div>
<div class="line">                        externals.</div>
<div class="line">  -S, --status          Output status of the repositories managed by</div>
<div class="line">                        checkout_externals. By default only summary</div>
<div class="line">                        information is provided. Use verbose output to see</div>
<div class="line">                        details.</div>
<div class="line">  -v, --verbose         Output additional information to the screen and log</div>
<div class="line">                        file. This flag can be used up to two times,</div>
<div class="line">                        increasing the verbosity level each time.</div>
<div class="line">  --backtrace           DEVELOPER: show exception backtraces as extra</div>
<div class="line">                        debugging output</div>
<div class="line">  -d, --debug           DEVELOPER: output additional debugging information to</div>
<div class="line">                        the screen and log file.</div>
<div class="line">  --no-logging          DEVELOPER: disable logging.</div>
</div><!-- fragment --><p> NOTE: checkout_externals <em>MUST</em> be run from the root of the source tree it is managing. For example, if you cloned a repository with: </p><pre class="fragment">$ git clone git@github.com/{SOME_ORG}/some-project some-project-dev
</pre><p> Then the root of the source tree is /path/to/some-project-dev. If you obtained a sub-project via a checkout of another project: </p><pre class="fragment">$ git clone git@github.com/{SOME_ORG}/some-project some-project-dev
</pre><p> and you need to checkout the sub-project externals, then the root of the source tree is /path/to/some-project-dev. Do <em>NOT</em> run checkout_externals from within /path/to/some-project-dev/sub-project</p>
<p>The root of the source tree will be referred to as <code>${SRC_ROOT}</code> below.</p>
<h1><a class="anchor" id="autotoc_md233"></a>
Supported workflows</h1>
<ul>
<li>Checkout all required components from the default externals description file: <pre class="fragment">$ cd ${SRC_ROOT}
$ ./manage_externals/checkout_externals
</pre></li>
<li><p class="startli">To update all required components to the current values in the externals description file, re-run checkout_externals: </p><pre class="fragment">$ cd ${SRC_ROOT}
$ ./manage_externals/checkout_externals
</pre><p> If there are <em>any</em> modifications to <em>any</em> working copy according to the git or svn 'status' command, checkout_externals will not update any external repositories. Modifications include: modified files, added files, removed files, or missing files.</p>
<p class="startli">To avoid this safety check, edit the externals description file and comment out the modified external block.</p>
</li>
<li>Checkout all required components from a user specified externals description file: <pre class="fragment">$ cd ${SRC_ROOT}
$ ./manage_externals/checkout_externals --externals my-externals.cfg
</pre></li>
<li><p class="startli">Status summary of the repositories managed by checkout_externals: </p><pre class="fragment">$ cd ${SRC_ROOT}
$ ./manage_externals/checkout_externals --status

      ./cime
  s   ./components/cism
      ./components/mosart
  e-o ./components/rtm
   M  ./src/fates
  e-o ./tools/PTCLM
</pre><p> where:</p><ul>
<li>column one indicates the status of the repository in relation to the externals description file.</li>
<li>column two indicates whether the working copy has modified files.</li>
<li>column three shows how the repository is managed, optional or required</li>
</ul>
<p class="startli">Column one will be one of these values:</p><ul>
<li>s : out-of-sync : repository is checked out at a different commit compared with the externals description</li>
<li>e : empty : directory does not exist - checkout_externals has not been run</li>
<li>? : unknown : directory exists but .git or .svn directories are missing</li>
</ul>
<p class="startli">Column two will be one of these values:</p><ul>
<li>M : Modified : modified, added, deleted or missing files</li>
<li>: blank / space : clean</li>
<li>- : dash : no meaningful state, for empty repositories</li>
</ul>
<p class="startli">Column three will be one of these values:</p><ul>
<li>o : optional : optionally repository</li>
<li>: blank / space : required repository</li>
</ul>
</li>
<li>Detailed git or svn status of the repositories managed by checkout_externals: <pre class="fragment">$ cd ${SRC_ROOT}
$ ./manage_externals/checkout_externals --status --verbose
</pre> </li>
</ul>
<h1><a class="anchor" id="autotoc_md234"></a>
Externals description file</h1>
<p>The externals description contains a list of the external repositories that are used and their version control locations. The file format is the standard ini/cfg configuration file format. Each external is defined by a section containing the component name in square brackets:</p>
<ul>
<li>name (string) : component name, e.g. [cime], [cism], etc.</li>
</ul>
<p>Each section has the following keyword-value pairs:</p>
<ul>
<li>required (boolean) : whether the component is a required checkout, 'true' or 'false'.</li>
<li>local_path (string) : component path <em>relative</em> to where checkout_externals is called.</li>
<li><p class="startli">protoctol (string) : version control protocol that is used to manage the component. Valid values are 'git', 'svn', 'externals_only'.</p>
<p class="startli">Switching an external between different protocols is not supported, e.g. from svn to git. To switch protocols, you need to manually move the old working copy to a new location.</p>
<p class="startli">Note: 'externals_only' will only process the external's own external description file without trying to manage a repository for the component. This is used for retreiving externals for standalone components like cam and clm. If the source root of the externals_only component is the same as the main source root, then the local path must be set to '.', the unix current working directory, e. g. 'local_path = .'</p>
</li>
<li><p class="startli">repo_url (string) : URL for the repository location, examples:</p><ul>
<li><a href="https://svn-ccsm-models.cgd.ucar.edu/glc">https://svn-ccsm-models.cgd.ucar.edu/glc</a></li>
<li><a href="#" onclick="location.href='mai'+'lto:'+'git'+'@g'+'ith'+'ub'+'.co'+'m'; return false;">git@g<span class="obfuscator">.nosp@m.</span>ithu<span class="obfuscator">.nosp@m.</span>b.com</a>:esmci/cime.git</li>
<li>/path/to/local/repository</li>
<li>.</li>
</ul>
<p class="startli">NOTE: To operate on only the local clone and and ignore remote repositories, set the url to '.' (the unix current path), i.e. 'repo_url = .' . This can be used to checkout a local branch instead of the upstream branch.</p>
<p class="startli">If a repo url is determined to be a local path (not a network url) then user expansion, e.g. ~/, and environment variable expansion, e.g. $HOME or $REPO_ROOT, will be performed.</p>
<p class="startli">Relative paths are difficult to get correct, especially for mixed use repos. It is advised that local paths expand to absolute paths. If relative paths are used, they should be relative to one level above local_path. If local path is 'src/foo', the the relative url should be relative to 'src'.</p>
</li>
<li>tag (string) : tag to checkout</li>
<li>hash (string) : the git hash to checkout. Only applies to git repositories.</li>
<li><p class="startli">branch (string) : branch to checkout from the specified repository. Specifying a branch on a remote repository means that checkout_externals will checkout the version of the branch in the remote, not the the version in the local repository (if it exists).</p>
<p class="startli">Note: one and only one of tag, branch hash must be supplied.</p>
</li>
<li>externals (string) : used to make manage_externals aware of sub-externals required by an external. This is a relative path to the external's root directory. For example, the main externals description has an external checkout out at 'src/useful_library'. useful_library requires additional externals to be complete. Those additional externals are managed from the source root by the externals description file pointed 'useful_library/sub-xternals.cfg', Then the main 'externals' field in the top level repo should point to 'sub-externals.cfg'.</li>
<li>from_submodule (True / False) : used to pull the repo_url, local_path, and hash properties for this external from the .gitmodules file in this repository. Note that the section name (the entry in square brackets) must match the name in the .gitmodules file. If from_submodule is True, the protocol must be git and no repo_url, local_path, hash, branch, or tag entries are allowed. Default: False</li>
<li>sparse (string) : used to control a sparse checkout. This optional entry should point to a filename (path relative to local_path) that contains instructions on which repository paths to include (or exclude) from the working tree. See the "SPARSE CHECKOUT" section of <a href="https://git-scm.com/docs/git-read-tree">https://git-scm.com/docs/git-read-tree</a> Default: sparse checkout is disabled</li>
<li>Lines begining with '#' or ';' are comments and will be ignored.</li>
</ul>
<h1><a class="anchor" id="autotoc_md235"></a>
Obtaining this tool, reporting issues, etc.</h1>
<p>The master repository for manage_externals is <a href="https://github.com/ESMCI/manage_externals">https://github.com/ESMCI/manage_externals</a>. Any issues with this tool should be reported there. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
